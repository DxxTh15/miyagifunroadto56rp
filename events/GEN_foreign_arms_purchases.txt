add_namespace = gen_foreign_arms_purchases

country_event = {
	id = gen_foreign_arms_purchases.1
	title = gen_foreign_arms_purchases.1.t
	desc = gen_foreign_arms_purchases.1.desc
	picture = GFX_report_event_generic_lend_lease
	is_triggered_only = yes
	option = {
		trigger = {
			NOT = {
				has_country_flag = USA_cant_sell_weapons_trigger
			}

		}
		name = gen_foreign_arms_purchases.1.a
		USA = { country_event = gen_foreign_arms_purchases.2 }
	}
	option = {
		trigger = {
			NOT = {
				has_country_flag = GER_cant_sell_weapons_trigger
			}
		}
		name = gen_foreign_arms_purchases.1.b
		GER = { country_event = gen_foreign_arms_purchases.2 }
	}

	option = {
		trigger = {
			NOT = {
				has_country_flag = SOV_cant_sell_weapons_trigger
			}
		}
		name = gen_foreign_arms_purchases.1.c
		SOV = { country_event = gen_foreign_arms_purchases.2 }
	}
	
	option = {	# Approach Other Majors
		name = gen_foreign_arms_purchases.1.d
		ROOT = { country_event = gen_foreign_arms_purchases.5 }
	}
}

country_event = { #allow for shipping arms
	id = gen_foreign_arms_purchases.2
	title = gen_foreign_arms_purchases.2.t
	desc = gen_foreign_arms_purchases.2.desc
	picture = GFX_report_event_generic_lend_lease
	is_triggered_only = yes

	option = { # Yes - Sure ;D 
		name = gen_foreign_arms_purchases.2.a
		ai_chance = {
			factor = 40
			modifier = {
				has_opinion = { target = FROM value < -10 }
				factor = -80
			}
			modifier = {
				has_opinion = { target = FROM value > 50 }
				factor = 40
			}
			modifier = {
				has_same_ideology = yes
				factor = 40
			}
		}
		add_to_array = {
			array = ROOT.r56rp_gun_export_permission_array
			value = FROM.id
		}
		FROM = {
			clr_country_flag = r56rp_gen_foreign_arms_purchases_2
			set_country_flag = r56rp_gen_foreign_arms_purchases_3
		}
		
		
		log = "Added to gun export array - ROOT: [ROOT.GetName], FROM: [FROM.GetName]"
	}

	option = { # No - Go away
		name = gen_foreign_arms_purchases.2.b
		ai_chance = {
			factor = 60
		}
		FROM = {
			country_event = gen_foreign_arms_purchases.3
			clr_country_flag = r56rp_gen_foreign_arms_purchases_2
		}
		log = "Denied gun exports - ROOT: [ROOT.GetName], FROM: [FROM.GetName]"
	}

	option = { # No and dont ask me again! #
		name = gen_foreign_arms_purchases.2.c
		ai_chance = {
			factor = 5
			modifier = {
				has_opinion = { target = FROM value < -100 }
				factor = 95
			}
		}
		add_to_array = {
			array = ROOT.r56rp_gun_export_ban_array
			value = FROM.id
		}
		FROM = {
			clr_country_flag = r56rp_gen_foreign_arms_purchases_2
		}
		log = "Blacklisted - ROOT: [ROOT.GetName], FROM: [FROM.GetName]"
	}
}

country_event = {
	id = gen_foreign_arms_purchases.3 # No Sale of Weapons from Major List NR 1.
	title = gen_foreign_arms_purchases.3.t
	desc = gen_foreign_arms_purchases.3.desc
	picture = GFX_report_event_generic_lend_lease
	is_triggered_only = yes
	option = {	# Try Approach another Major.
		name = gen_foreign_arms_purchases.3.a
		country_event = gen_foreign_arms_purchases.1
	}
	option = {	#  Don't try approaching another Major - Forget it.
		name = gen_foreign_arms_purchases.3.b
		add_political_power = 10
	}
}

country_event = {
	id = gen_foreign_arms_purchases.4
	title = gen_foreign_arms_purchases.4.t
	desc = gen_foreign_arms_purchases.4.desc
	picture = GFX_report_event_generic_lend_lease
	is_triggered_only = yes
	option = {	# Oh yes! Succesful Approachment for Purchases
		name = gen_foreign_arms_purchases.4.a
		if = {
			limit = {
				has_country_flag = SOV_can_sell_weapons_trigger
			}
		}
		if = {
			limit = {
				has_country_flag = GER_can_sell_weapons_trigger
			}
		}
		if = {
			limit = {
				has_country_flag = ENG_can_sell_weapons_trigger
			}
		}
		if = {
			limit = {
				has_country_flag = USA_can_sell_weapons_trigger
			}
		}
		if = {
			limit = {
				has_country_flag = FRA_can_sell_weapons_trigger
			}
		}
		if = {
			limit = {
				has_country_flag = ITA_can_sell_weapons_trigger
			}
		}
		if = {
			limit = {
				has_country_flag = JAP_can_sell_weapons_trigger
			}
		}
	}
}

country_event = {
	id = gen_foreign_arms_purchases.5
	title = gen_foreign_arms_purchases.5.t
	desc = gen_foreign_arms_purchases.5.desc
	picture = GFX_report_event_generic_lend_lease
	is_triggered_only = yes

	option = {	# Approach France
		name = gen_foreign_arms_purchases.5.a
		trigger = {
			NOT = {
				has_country_flag = FRA_cant_sell_weapons_trigger
			}
		}
		FRA = { country_event = gen_foreign_arms_purchases.2 }
	}

	option = { # Approach England
		trigger = {
			NOT = {
				has_country_flag = ENG_cant_sell_weapons_trigger
			}
		}
		name = gen_foreign_arms_purchases.5.b
		ENG = { country_event = gen_foreign_arms_purchases.2 }
	}

	option = { # Approach Italy
		trigger = {
			NOT = {
				has_country_flag = ITA_cant_sell_weapons_trigger
			}
		}
		name = gen_foreign_arms_purchases.5.c
		ITA = { country_event = gen_foreign_arms_purchases.2 }
	}

	option = { # Approach Japan
		trigger = {
			NOT = {
				has_country_flag = JAP_cant_sell_weapons_trigger
			}
		}
		name = gen_foreign_arms_purchases.5.d
		JAP = { country_event = gen_foreign_arms_purchases.2 }
	}
}
